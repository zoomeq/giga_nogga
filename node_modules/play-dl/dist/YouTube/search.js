"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.yt_search = void 0;
const request_1 = require("./utils/request");
const parser_1 = require("./utils/parser");
var SearchType;
(function (SearchType) {
    SearchType["Video"] = "EgIQAQ%253D%253D";
    SearchType["PlayList"] = "EgIQAw%253D%253D";
    SearchType["Channel"] = "EgIQAg%253D%253D";
})(SearchType || (SearchType = {}));
async function yt_search(search, options = {}) {
    var _a;
    let url = 'https://www.youtube.com/results?search_query=' + search.replaceAll(' ', '+');
    (_a = options.type) !== null && _a !== void 0 ? _a : (options.type = 'video');
    if (!url.match('&sp=')) {
        url += '&sp=';
        switch (options === null || options === void 0 ? void 0 : options.type) {
            case 'channel':
                url += SearchType.Channel;
                break;
            case 'playlist':
                url += SearchType.PlayList;
                break;
            case 'video':
                url += SearchType.Video;
                break;
        }
    }
    const body = await request_1.request(url, {
        headers: { 'accept-language': 'en-US,en-IN;q=0.9,en;q=0.8,hi;q=0.7' }
    });
    const data = parser_1.ParseSearchResult(body, options);
    return data;
}
exports.yt_search = yt_search;
//# sourceMappingURL=search.js.map