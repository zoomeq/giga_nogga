{"version":3,"file":"search.js","sourceRoot":"","sources":["../../play-dl/YouTube/search.ts"],"names":[],"mappings":";;;AAAA,6CAA0C;AAC1C,2CAAyE;AAKzE,IAAK,UAIJ;AAJD,WAAK,UAAU;IACX,wCAA0B,CAAA;IAC1B,2CAA6B,CAAA;IAC7B,0CAA4B,CAAA;AAChC,CAAC,EAJI,UAAU,KAAV,UAAU,QAId;AAEM,KAAK,UAAU,SAAS,CAC3B,MAAc,EACd,UAAgC,EAAE;;IAElC,IAAI,GAAG,GAAG,+CAA+C,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACxF,MAAA,OAAO,CAAC,IAAI,oCAAZ,OAAO,CAAC,IAAI,GAAK,OAAO,EAAC;IACzB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;QACpB,GAAG,IAAI,MAAM,CAAC;QACd,QAAQ,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAE;YACnB,KAAK,SAAS;gBACV,GAAG,IAAI,UAAU,CAAC,OAAO,CAAC;gBAC1B,MAAM;YACV,KAAK,UAAU;gBACX,GAAG,IAAI,UAAU,CAAC,QAAQ,CAAC;gBAC3B,MAAM;YACV,KAAK,OAAO;gBACR,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC;gBACxB,MAAM;SACb;KACJ;IACD,MAAM,IAAI,GAAG,MAAM,iBAAO,CAAC,GAAG,EAAE;QAC5B,OAAO,EAAE,EAAE,iBAAiB,EAAE,qCAAqC,EAAE;KACxE,CAAC,CAAC;IACH,MAAM,IAAI,GAAG,0BAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAC9C,OAAO,IAAI,CAAC;AAChB,CAAC;AAzBD,8BAyBC","sourcesContent":["import { request } from './utils/request';\r\nimport { ParseSearchInterface, ParseSearchResult } from './utils/parser';\r\nimport { Video } from './classes/Video';\r\nimport { Channel } from './classes/Channel';\r\nimport { PlayList } from './classes/Playlist';\r\n\r\nenum SearchType {\r\n    Video = 'EgIQAQ%253D%253D',\r\n    PlayList = 'EgIQAw%253D%253D',\r\n    Channel = 'EgIQAg%253D%253D'\r\n}\r\n\r\nexport async function yt_search(\r\n    search: string,\r\n    options: ParseSearchInterface = {}\r\n): Promise<(Video | Channel | PlayList)[]> {\r\n    let url = 'https://www.youtube.com/results?search_query=' + search.replaceAll(' ', '+');\r\n    options.type ??= 'video';\r\n    if (!url.match('&sp=')) {\r\n        url += '&sp=';\r\n        switch (options?.type) {\r\n            case 'channel':\r\n                url += SearchType.Channel;\r\n                break;\r\n            case 'playlist':\r\n                url += SearchType.PlayList;\r\n                break;\r\n            case 'video':\r\n                url += SearchType.Video;\r\n                break;\r\n        }\r\n    }\r\n    const body = await request(url, {\r\n        headers: { 'accept-language': 'en-US,en-IN;q=0.9,en;q=0.8,hi;q=0.7' }\r\n    });\r\n    const data = ParseSearchResult(body, options);\r\n    return data;\r\n}\r\n"]}